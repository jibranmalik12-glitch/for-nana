<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>For Nana ðŸ’–</title>
<style>
  :root{
    --bg1:#ffd6e7; --bg2:#fff1f6; --card:#ffffffcc;
    --pink:#ff4d8d; --pink2:#ff79a8; --shadow:0 20px 60px rgba(0,0,0,.12);
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; overflow:hidden;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background: radial-gradient(circle at top, var(--bg2), var(--bg1));
    display:flex; align-items:center; justify-content:center;
  }
  .glow{
    position:fixed; inset:-20%;
    background:
      radial-gradient(circle at 20% 20%, rgba(255,77,141,.22), transparent 55%),
      radial-gradient(circle at 80% 30%, rgba(255,121,168,.20), transparent 55%),
      radial-gradient(circle at 60% 85%, rgba(255,77,141,.16), transparent 55%);
    filter: blur(10px); pointer-events:none; opacity:.9;
  }

  .wrap{
    width:min(980px,94vw);
    display:grid; grid-template-columns: 1fr;
    gap:14px; position:relative; z-index:2;
  }

  .card{
    background: rgba(255,255,255,.78);
    border:1px solid rgba(255,255,255,.9);
    border-radius:22px;
    box-shadow: var(--shadow);
    padding:20px 18px;
    backdrop-filter: blur(10px);
  }

  h1{margin:0 0 10px; color:#b30059; font-size: clamp(24px, 4vw, 34px)}
  .sub{margin:0 0 10px; opacity:.86; line-height:1.55}
  .status{margin:0; opacity:.85; line-height:1.45; font-size:14px}

  .names{
    display:inline-flex; gap:10px; align-items:center;
    padding:10px 12px; border-radius:999px;
    background:rgba(255,255,255,.65);
    border:1px solid rgba(255,255,255,.9);
    margin: 8px 0 12px;
  }
  .pill{
    padding:6px 10px; border-radius:999px;
    background: linear-gradient(135deg, var(--pink), var(--pink2));
    color:#fff; font-weight:900; font-size:14px;
  }

  .btnRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  button{
    border:0; padding:12px 14px; border-radius:14px;
    font-weight:900; cursor:pointer; font-size:15px;
  }
  .yes{background: linear-gradient(135deg, var(--pink), var(--pink2)); color:#fff; flex:1}
  .no{background: rgba(0,0,0,.07); flex:1}

  .gifBox{
    border-radius:18px; overflow:hidden;
    background: rgba(255,255,255,.75);
    border:1px solid rgba(255,255,255,.9);
    box-shadow: 0 14px 26px rgba(0,0,0,.08);
    min-height: 260px;
    display:flex; align-items:center; justify-content:center;
    position:relative;
  }
  .gifBox img{width:100%; height:100%; object-fit:cover; display:block}
  .gifCaption{
    position:absolute; bottom:10px; left:10px; right:10px;
    padding:9px 10px; border-radius:14px;
    background: rgba(255,255,255,.78);
    font-weight:900; font-size:13px;
  }

  .typedWrap{
    display:none;
    margin-top:12px;
    padding:14px;
    border-radius:18px;
    background: rgba(255,255,255,.7);
    border:1px solid rgba(255,255,255,.9);
  }
  .typed{margin:0; white-space:pre-wrap; line-height:1.7; font-size:15px}

  /* Overlay */
  .overlay{
    position:fixed; inset:0;
    background: rgba(255,214,231,.60);
    backdrop-filter: blur(10px);
    display:flex; align-items:center; justify-content:center;
    z-index:9999;
  }
  .envelopeCard{
    width:min(520px,92vw);
    background: rgba(255,255,255,.82);
    border:1px solid rgba(255,255,255,.92);
    border-radius:24px;
    box-shadow:0 25px 80px rgba(0,0,0,.18);
    padding:22px 18px;
    text-align:center;
  }
  .envelopeTitle{margin:0 0 8px; color:#b30059; font-weight:1000; font-size:20px}
  .envelopeSub{margin:0 0 14px; opacity:.85; line-height:1.55; font-size:14.5px}
  .env{
    width: 210px; height: 140px;
    margin: 10px auto 14px;
    position:relative;
    border-radius:14px;
    background: linear-gradient(135deg, #fff, #ffe6f0);
    border:1px solid rgba(255,121,168,.25);
    box-shadow:0 18px 40px rgba(255,77,141,.18);
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  .env .flap{
    position:absolute; left:0; right:0; top:-2px; height:75px;
    background: linear-gradient(135deg, #ffb3ce, #ff7aa8);
    clip-path: polygon(0 0, 100% 0, 50% 100%);
    transform-origin: top;
    transition: transform .55s ease;
  }
  .env.open .flap{ transform: rotateX(175deg); }
  .env .seal{
    position:absolute; width:34px; height:34px; border-radius:999px;
    background: radial-gradient(circle at 30% 30%, #fff, #ff79a8);
    left:50%; top:58%; transform:translate(-50%,-50%);
    box-shadow:0 12px 22px rgba(255,77,141,.25);
  }

  .startBtn{
    display:inline-block;
    padding:12px 16px;
    border-radius:14px;
    background: linear-gradient(135deg, var(--pink), var(--pink2));
    color:#fff;
    font-weight:1000;
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  .hint{margin:10px 0 0; font-size:12.5px; opacity:.7}

  /* Floating hearts */
  .heart{
    position:absolute; width:14px; height:14px;
    background: var(--pink);
    transform: rotate(45deg);
    opacity:.25;
    animation: floatUp linear forwards;
    border-radius:3px;
    pointer-events:none;
  }
  .heart:before,.heart:after{
    content:"";
    position:absolute;
    width:14px;height:14px;
    background: var(--pink);
    border-radius:50%;
  }
  .heart:before{left:-7px;top:0}
  .heart:after{top:-7px;left:0}
  @keyframes floatUp{
    0%{transform:translateY(0) rotate(45deg) scale(1); opacity:.15}
    100%{transform:translateY(-120vh) rotate(45deg) scale(1.6); opacity:0}
  }

  @media (max-width:520px){
    body{align-items:flex-start; padding:14px 10px 22px;}
    .wrap{width:100%;}
    .gifBox{min-height:240px;}
  }
</style>
</head>
<body>
  <div class="glow"></div>

  <!-- Overlay -->
  <div class="overlay" id="overlay">
    <div class="envelopeCard">
      <p class="envelopeTitle">A tiny love letter for Nana ðŸ’Œ</p>
      <p class="envelopeSub">
        Tap the envelope (or button) to open itâ€¦ and start music ðŸŽ¶<br/>
        (Offline music file: <b>music.mp3</b>)
      </p>

      <div class="env" id="env" onclick="startExperience()" ontouchstart="startExperience()">
        <div class="flap"></div>
        <div class="seal"></div>
      </div>

      <div class="startBtn" id="startBtn" onclick="startExperience()" ontouchstart="startExperience()">
        Open & Start ðŸ’–
      </div>

      <p class="hint">Juju â†’ Nana</p>
      <p class="hint" id="debug" style="font-weight:900;"></p>
    </div>
  </div>

  <div class="wrap">
    <div class="card" id="questionCard">
      <h1>Nana, will you be my Valentine? ðŸ’˜</h1>

      <div class="names">
        <span class="pill">Nana</span>
        <span class="pill">Juju</span>
      </div>

      <p class="sub">If I could explain what you mean to me in one sentenceâ€¦ it still wouldnâ€™t be enough. ðŸŒ¸</p>
      <p class="status" id="statusText">Tap Open & Start first, then choose ðŸ˜Œ</p>

      <div class="btnRow">
        <button class="yes" id="yesBtn">Yes ðŸ˜˜</button>
        <button class="no" id="noBtn">No ðŸ™ˆ</button>
      </div>
    </div>

    <div class="card">
      <div class="gifBox" id="gifBox">
        <img id="gifImg" alt="gif" />
        <div class="gifCaption" id="gifCaption">Justâ€¦ donâ€™t make me too nervous ðŸ˜³</div>
      </div>

      <div class="typedWrap" id="typedWrap">
        <p class="typed" id="typedText"></p>
      </div>
    </div>
  </div>

  <audio id="bgMusic" preload="auto" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

<script>
  const gifs = {
    initial: { url: "initial.gif", caption: "Say yesâ€¦ softly ðŸ˜³" },
    sad: [
      { url: "sad1.gif", caption: "Oh noâ€¦ my heart ðŸ’”" },
      { url: "sad2.gif", caption: "Nana pleaseâ€¦ ðŸ¥º" },
      { url: "sad3.gif", caption: "Itâ€™s getting sadderâ€¦ ðŸ˜¢" },
      { url: "sad4.gif", caption: "Okayâ€¦ Iâ€™m officially broken ðŸ˜­" }
    ],
    kiss: { url: "kiss.gif", caption: "You said YES! A kiss for you ðŸ’‹" }
  };

  const overlay = document.getElementById("overlay");
  const env = document.getElementById("env");
  const debug = document.getElementById("debug");

  const music = document.getElementById("bgMusic");

  const questionCard = document.getElementById("questionCard");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");

  const gifBox = document.getElementById("gifBox");
  const gifImg = document.getElementById("gifImg");
  const gifCaption = document.getElementById("gifCaption");

  const typedWrap = document.getElementById("typedWrap");
  const typedText = document.getElementById("typedText");

  let started = false;
  let noCount = 0;

  function setGif(obj){
    gifImg.src = obj.url;
    gifCaption.textContent = obj.caption;
  }
  setGif(gifs.initial);

  // âœ… Make it GLOBAL for inline onclick to always work
  window.startExperience = async function(){
    if(started) return;
    started = true;

    // debug
    if(debug) debug.textContent = "Openingâ€¦";

    if(env) env.classList.add("open");

    // Always hide overlay
    overlay.style.display = "none";

    // Try to start music
    try { await music.play(); } catch(e) {}

    // Remove debug text
    if(debug) debug.textContent = "";
  };

  // Extra safety: bind events programmatically too
  env.addEventListener("click", window.startExperience);
  env.addEventListener("touchstart", window.startExperience, {passive:true});
  document.getElementById("startBtn").addEventListener("click", window.startExperience);
  document.getElementById("startBtn").addEventListener("touchstart", window.startExperience, {passive:true});

  // Hearts background
  function spawnHeart(){
    const h = document.createElement("div");
    h.className = "heart";
    const size = 10 + Math.random()*18;
    h.style.width = size + "px";
    h.style.height = size + "px";
    h.style.left = Math.random()*100 + "vw";
    h.style.bottom = "-20px";
    const duration = 4 + Math.random()*5;
    h.style.animationDuration = duration + "s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), duration*1000);
  }
  setInterval(spawnHeart, 280);

  // NO = cycle sad gifs
  noBtn.addEventListener("click", () => {
    noCount++;
    const idx = Math.min(noCount-1, gifs.sad.length-1);
    setGif(gifs.sad[idx]);
  });

  // YES = remove question page + show final scene
  yesBtn.addEventListener("click", () => {
    setGif(gifs.kiss);

    if(questionCard) questionCard.remove();

    typedWrap.style.display = "block";

    const msg =
`Nanaâ€¦ ðŸ’ž

You are my calm,
my happiness,
my always choice.

Happy Valentineâ€™s Day.

â€” Juju â¤ï¸`;

    typedText.textContent = "";
    let i = 0;
    const t = setInterval(()=>{
      typedText.textContent += msg[i];
      i++;
      if(i >= msg.length) clearInterval(t);
    }, 25);

    try { music.play(); } catch(e) {}
  });
</script>
</body>
</html>
